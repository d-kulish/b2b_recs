{% extends 'base.html' %}

{% block main_class %}{% endblock %}

{% load static %}

{% block content %}
<div class="flex bg-dotted" style="height: 100vh;">
    <!-- Main Content Area -->
    <div class="flex-1 flex flex-col relative" style="z-index: 10;">
        <!-- Fixed Model Info Tablet -->
        <div class="p-6 pb-0 overflow-y-auto" style="scrollbar-gutter: stable;">
            <div class="max-w-[88rem] mx-auto">
                <div class="bg-white border border-black rounded-xl px-6 py-3 shadow-lg">
                    <!-- Single Row: Logo | Model Name | Status | Dates | Description -->
                    <div class="flex items-center gap-6">
                        <!-- Logo with Recs Studio text beneath -->
                        <a href="{% url 'system_dashboard' %}" class="flex flex-col items-center hover:opacity-80 transition flex-shrink-0 mr-4">
                            <img src="{% static 'images/recs_logo.png' %}" alt="Recs Studio" class="h-[70px] w-auto">
                            <span class="text-sm font-bold text-gray-700 mt-1">Recs Studio</span>
                        </a>

                        <!-- Model Name and Description (30% width) -->
                        <div class="flex-shrink-0" style="width: 30%;">
                            <h1 class="text-5xl font-bold truncate
                                {% if model.is_endpoint_active %}text-green-900
                                {% elif model.status == 'failed' %}text-red-900
                                {% else %}text-blue-900{% endif %}">
                                {{ model.name }}
                            </h1>
                            <p class="text-sm text-gray-600 mt-1 truncate">
                                {% if model.description %}
                                    {{ model.description }}
                                {% else %}
                                    <span class="italic text-gray-400">No description</span>
                                {% endif %}
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Horizontal Navigation Bar -->
                <div class="model-nav-bar">
                    <div class="progress-bar-pills">
                        <a href="{% url 'model_dashboard' model.id %}"
                           class="progress-step-pill progress-step-pill-link {% if request.resolver_match.url_name == 'model_dashboard' %}current{% else %}future{% endif %}">
                            Dashboard
                        </a>
                        <a href="{% url 'model_etl' model.id %}"
                           class="progress-step-pill progress-step-pill-link {% if request.resolver_match.url_name == 'model_etl' %}current{% else %}future{% endif %}">
                            ETL
                        </a>
                        <a href="{% url 'model_configs' model.id %}"
                           class="progress-step-pill progress-step-pill-link {% if request.resolver_match.url_name == 'model_configs' or request.resolver_match.url_name == 'model_dataset' %}current{% else %}future{% endif %}">
                            Configs
                        </a>
                        <a href="{% url 'model_experiments' model.id %}"
                           class="progress-step-pill progress-step-pill-link {% if request.resolver_match.url_name == 'model_experiments' %}current{% else %}future{% endif %}">
                            Experiments
                        </a>
                        <a href="{% url 'model_training' model.id %}"
                           class="progress-step-pill progress-step-pill-link {% if request.resolver_match.url_name == 'model_training' %}current{% else %}future{% endif %}">
                            Training
                        </a>
                        <a href="{% url 'model_deployment' model.id %}"
                           class="progress-step-pill progress-step-pill-link {% if request.resolver_match.url_name == 'model_deployment' %}current{% else %}future{% endif %}">
                            Deployment
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Content Area -->
        <main class="flex-1 overflow-y-scroll p-6" style="scrollbar-gutter: stable;">
            <div class="max-w-[88rem] mx-auto">
                {% block model_content %}{% endblock %}
            </div>
        </main>
    </div>
</div>
{% endblock %}
